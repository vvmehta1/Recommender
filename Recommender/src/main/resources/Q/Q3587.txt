 question  ,  "void  playsound()  {final  audiotrack  audiotrack  =  new  audiotrack(audiomanager.stream_music'  '  samplerate'  '  audioformat.channel_configuration_mono'  '  audioformat.encoding_pcm_16bit'  '  generatedsnd.length'  '  audiotrack.mode_static);audiotrack.write(generatedsnd'  '  0'  '  generatedsnd.length);audiotrack.play();};  01-02  18:24:45.035:  e/androidruntime(6599):  caused  by:  java.lang.illegalstateexception:  play()  called  on  uninitialized  audiotrack.;  public  class  displaybowieactivity  extends  activity  {private  final  int  duration  =  200;  //  secondsprivate  final  int  samplerate  =  8000;private  final  int  numsamples  =  duration  *  samplerate  /  1000;private  double  sample[];//  =new  double[numsamples];private  final  double  freqoftone  =  1440;  //  hzprivate  int  pulselength;private  byte  generatedsnd[];//  =  new  byte[2  *  numsamples];private  int  period  =  4;  //  hzprivate  audiotrack  audiotrack;handler  handler  =  new  handler();@overrideprotected  void  oncreate(bundle  savedinstancestate)  {super.oncreate(savedinstancestate);setcontentview(r.layout.activity_display_bowie);intent  intent  =  getintent();string  smessage  =  intent.getstringextra(mainactivity.sound_message);period  =  integer.parseint(smessage);pulselength  =  duration  *  samplerate  /  1000;system.out.print(""+++  period  ""  +  period);system.out.print(""+++  pulse  ""  +  pulselength);gentone();view  view  =  this.getwindow().getdecorview();view.setbackgroundcolor(color.parsecolor(""#8e8e38""));}@overridepublic  boolean  oncreateoptionsmenu(menu  menu)  {//  inflate  the  menu;  this  adds  items  to  the  action  bar  if  it  is  present.getmenuinflater().inflate(r.menu.display_bowie'  '  menu);return  true;}@overrideprotected  void  onresume()  {super.onresume();new  soundgen().execute(period);}private  class  soundgen  extends  asynctask<integer'  '  void'  '  void>  {@overrideprotected  void  doinbackground(integer...  hz)  {long  mils  =  (int)  (1000.0  /  hz[0]);long  start  =  system.currenttimemillis();long  next  =  start  +  mils;while  (true)  {long  now  =  system.currenttimemillis();if  (now  >  next)  {next  =  now  +  mils;playsound();}}}}void  gentone()  {sample  =  new  double[numsamples];generatedsnd  =  new  byte[2  *  numsamples];int  rate  =  numsamples  /  period;for  (int  i  =  0;  i  <  numsamples;  ++i)  {if  (i  %  rate  ==  0)  {system.out.println(""+++  create  tone  ""  +  i);int  j  =  0;for  (j  =  0;  j  <  pulselength;  j++)  {sample[i  +  j]  =  math.sin(2  *  math.pi  *  (i  +  j)/  (samplerate  /  freqoftone));system.out.println(""+++  sample  ""  +  (i  +  j)  +  ""  ""+  sample[i  +  j]);}i  =  i  +  j;}}//  convert  to  16  bit  pcm  sound  array//  assumes  the  sample  buffer  is  normalised.int  idx  =  0;for  (final  double  dval  :  sample)  {//  scale  to  maximum  amplitudefinal  short  val  =  (short)  ((dval  *  32767));//  in  16  bit  wav  pcm'  '  first  byte  is  the  low  order  bytegeneratedsnd[idx++]  =  (byte)  (val  &  0x00ff);generatedsnd[idx++]  =  (byte)  ((val  &  0xff00)  >>>  8);}}void  playsound()  {system.out.println(""+++  play  ""  );//audiotrack.stop();//audiotrack.setplaybackheadposition(0);final  audiotrack  audiotrack  =  new  audiotrack(audiomanager.stream_music'  '  samplerate'  '  audioformat.channel_configuration_mono'  '  audioformat.encoding_pcm_16bit'  '  generatedsnd.length'  '  audiotrack.mode_static);audiotrack.write(generatedsnd'  '  0'  '  generatedsnd.length);audiotrack.play();};  01-02  18:24:45.035:  e/androidruntime(6599):  fatal  exception:  asynctask  #101-02  18:24:45.035:  e/androidruntime(6599):  java.lang.runtimeexception:  an  error  occured  while  executing  doinbackground()01-02  18:24:45.035:  e/androidruntime(6599):  at  android.os.asynctask$3.done(asynctask.java:200)01-02  18:24:45.035:  e/androidruntime(6599):  at  java.util.concurrent.futuretask$sync.innersetexception(futuretask.java:274)01-02  18:24:45.035:  e/androidruntime(6599):  at  java.util.concurrent.futuretask.setexception(futuretask.java:125)01-02  18:24:45.035:  e/androidruntime(6599):  at  java.util.concurrent.futuretask$sync.innerrun(futuretask.java:308)01-02  18:24:45.035:  e/androidruntime(6599):  at  java.util.concurrent.futuretask.run(futuretask.java:138)01-02  18:24:45.035:  e/androidruntime(6599):  at  java.util.concurrent.threadpoolexecutor.runworker(threadpoolexecutor.java:1088)01-02  18:24:45.035:  e/androidruntime(6599):  at  java.util.concurrent.threadpoolexecutor$worker.run(threadpoolexecutor.java:581)01-02  18:24:45.035:  e/androidruntime(6599):  at  java.lang.thread.run(thread.java:1019)01-02  18:24:45.035:  e/androidruntime(6599):  caused  by:  java.lang.illegalstateexception:  play()  called  on  uninitialized  audiotrack.01-02  18:24:45.035:  e/androidruntime(6599):  at  android.media.audiotrack.play(audiotrack.java:824)01-02  18:24:45.035:  e/androidruntime(6599):  at  uk.co.moonsit.signals.displaybowieactivity.playsound(displaybowieactivity.java:164)01-02  18:24:45.035:  e/androidruntime(6599):  at  uk.co.moonsit.signals.displaybowieactivity$soundgen.doinbackground(displaybowieactivity.java:90)01-02  18:24:45.035:  e/androidruntime(6599):  at  uk.co.moonsit.signals.displaybowieactivity$soundgen.doinbackground(displaybowieactivity.java:1)01-02  18:24:45.035:  e/androidruntime(6599):  at  android.os.asynctask$2.call(asynctask.java:185)01-02  18:24:45.035:  e/androidruntime(6599):  at  java.util.concurrent.futuretask$sync.innerrun(futuretask.java:306)01-02  18:24:45.035:  e/androidruntime(6599):  ...  4  more"  ,i  want  to  play  a  tone  puls  repeat  at  a  specifi  rate  eg  time  a  second  it  work  about  time  and  then  crash  as  below  in  an  asynctask  i  run  a  continu  loop  that  check  the  time  and  call  playsound  when  requir  it  work  for  a  few  second  and  then  get  this  error  even  though  the  track  is  initialis  each  time  ani  indic  of  what  i  am  do  wrong  or  could  do  better  here  the  code  and  here  the  full  error  ,  simpleassignmentexpress  arraylength  objectmethodinvoc  actualmethodparamet  extendsspecif  privatefieldspecifi  finalfieldspecifi  instancefield  instancefieldinitializationstat  intdatatyp  formalmethodparamet  objectvari  simplevari  arrayel  postincrementexpress  bytedatatyp  explicittypecast  andexpress  rightshiftunsignedexpress  javalangstringlength    simpleassignmentexpress  arraylength  objectmethodinvoc  actualmethodparamet  javalangstringlength  