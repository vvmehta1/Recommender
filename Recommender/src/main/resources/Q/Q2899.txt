 question  ,  "concurrenthashmap.get();  concurrenthashmap.put();  static  final  concurrenthashmap  map  =  new  concurrenthashmap();//sharedlock  is  key  specific.one  map'  '  many  keys.there  is  a  1:1  //relationship  between  key  and  foo  instance.void  dosomething(semaphore  sharedlock)  {boolean  havelock  =  sharedlock.tryacquire(3000'  '  milliseconds);if  (havelock)  {log(""have  lock:  ""  +  threadid);foo  foo  =  map.get(""key"");log(""foo=""  +  foo);if  (foo  ==  null)  {log(""new  foo  time!  ""  +  threadid);foo  =  new  foo();  //foo  is  expensive  to  instancemap.put(""key""'  '  foo);}  elselog(""found  foo:""  +  threadid);log(""foo=""  +  foo);sharedlock.release();}  elselog(""no  lock  acquired"");};  thread  1thread  2  -  request  lock-  request  lock  -  have  lock  -  blocked  waiting  for  lock  -  get  from  map'  '  nothing  there  -  create  new  foo  -  place  new  foo  in  map  -  logs  foo.tostring()  -  release  lock  -  exit  method  -  have  lock  -  get  from  map'  '  nothing  there!!!  (why  not?)  -  create  new  foo  -  place  new  foo  in  map  -  logs  foo.tostring()  -  release  lock  -  exit  method;  have  lock:  1foo=nullnew  foo  time!  1foo=foo@cafebabe420have  lock:  2foo=nullnew  foo  time!  2foo=foo@boof00boo;  static  concurrenthashmap  map  =  new  concurrenthashmap(32'  '  1);;  concurrenthashmap;  linux  mysvr  2.6.9-78.0.5.elsmp  #1  smp;  x86_64  gnu/linux;  build  1.6.0_07-b06;  64-bit  server  vm  (build  10.0-b23'  '  mixed  mode)"  ,is  to  see  a  previous  by  differ  threadmi  expect  is  that  is  is  and  read  the  javadoc  seem  to  indic  so  but  i  am  convinc  that  realiti  is  differenton  my  product  server  the  below  to  be  happening  caught  it  with  log  pseudo  code  exampl  what  seem  to  be  happen  is  this  so  my  output  look  like  this  the  second  thread  doe  not  immedi  see  the  putwhyon  my  product  system  there  are  more  thread  and  ive  onli  seen  one  thread  the  first  one  that  immedi  follow  thread  have  a  problem  even  tri  shrink  the  concurr  level  on  concurrenthashmap  to  not  that  it  should  mattereg  where  am  i  go  wrongmi  expectationor  is  there  some  bug  in  my  code  the  real  softwar  not  the  abov  that  is  caus  this  ive  gone  over  it  repeat  and  am  sure  im  handl  the  lock  correctlyi  cannot  even  fathom  a  bug  in  or  the  jvmgorey  specif  that  might  be  relev  ,  objectvari  simplevari  instancefield  simpleassignmentexpress  actualmethodparamet  subtractexpress  objectcreationstat  constructorcal  objectmethodinvoc  notexpress    simpleassignmentexpress  objectmethodinvoc  actualmethodparamet  objectcreationstat  constructorcal  lessexpress  formalmethodparamet  returnstat     privatefieldspecifi  finalfieldspecifi  staticfieldspecifi  classfield  classconstantinitializationstat  simpleassignmentexpress  objectcreationstat  constructorcal  actualmethodparamet  instancefieldinitializationstat  intdatatyp  formalmethodparamet  staticmethodspecifi  throwsspecif  objectmethodinvoc  javautilarraylist  genericobjectcreationstat  forstat  lessexpress  postincrementexpress  javautilarraylistadd  javalangsystemoutprintln  stringliter  stringdatatyp  notexpress  booleandatatyp  ifstat  greaterexpress  instancefield  simplevari        javalangstringequ  objectmethodinvoc  actualmethodparamet     actualmethodparamet        subtractexpress  simpleassignmentexpress  